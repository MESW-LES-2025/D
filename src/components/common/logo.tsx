'use client';

import Link from 'next/link';
import * as React from 'react';
import { cn } from '@/lib/utils';

type LogoSize = 'sm' | 'md' | 'lg';

const iconSizeMap: Record<LogoSize, { width: number; height: number }> = {
  sm: { width: 24, height: 24 },
  md: { width: 32, height: 32 },
  lg: { width: 40, height: 40 },
};

const logoWithTextSizeMap: Record<LogoSize, { width: number; height: number }> = {
  sm: { width: 100, height: 24 },
  md: { width: 140, height: 32 },
  lg: { width: 180, height: 40 },
};

type LogoProps = {
  url?: string;
  size?: LogoSize;
  showText?: boolean;
  label?: string;
  className?: string;
} & React.HTMLAttributes<HTMLElement>;

export const Logo = ({
  url,
  size = 'md',
  showText = true,
  label,
  className,
  ...props
}: LogoProps) => {
  const ariaLabel = label || 'TaskUp';
  const dimensions = showText ? logoWithTextSizeMap[size] : iconSizeMap[size];

  const inner = showText
    ? (
        <svg
          width={dimensions.width}
          height={dimensions.height}
          viewBox="0 0 990 300"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
          aria-label={ariaLabel}
        >
          <path d="M927.643 92C939.143 92 949.559 94.9167 958.893 100.75C968.226 106.583 975.559 114.917 980.893 125.75C986.393 136.583 989.143 149.167 989.143 163.5C989.143 177.833 986.393 190.5 980.893 201.5C975.559 212.333 968.226 220.75 958.893 226.75C949.559 232.583 939.143 235.5 927.643 235.5C917.976 235.5 909.393 233.5 901.893 229.5C894.559 225.5 888.809 220.333 884.643 214V300H841.893V94H884.643V113.75C888.809 107.25 894.559 102 901.893 98C909.226 94 917.809 92 927.643 92ZM255 92C264.833 92 273.417 94 280.75 98C288.25 102 294 107.25 298 113.75V94H340.75V233.5H298V213.75C293.833 220.25 288 225.5 280.5 229.5C273.167 233.5 264.583 235.5 254.75 235.5C243.417 235.5 233.083 232.583 223.75 226.75C214.417 220.75 207 212.333 201.5 201.5C196.167 190.5 193.5 177.833 193.5 163.5C193.5 149.167 196.167 136.583 201.5 125.75C207 114.917 214.417 106.583 223.75 100.75C233.083 94.9167 243.5 92 255 92ZM425.428 92C442.928 92 456.678 96.3333 466.678 105C476.844 113.667 482.678 125.167 484.178 139.5H444.678C444.011 134.667 441.844 130.833 438.178 128C434.678 125.167 430.011 123.75 424.178 123.75C419.178 123.75 415.344 124.75 412.678 126.75C410.011 128.583 408.678 131.167 408.678 134.5C408.678 138.5 410.761 141.5 414.928 143.5C419.261 145.5 425.928 147.5 434.928 149.5C445.261 152.167 453.678 154.833 460.178 157.5C466.678 160 472.344 164.167 477.178 170C482.178 175.667 484.761 183.333 484.928 193C484.928 201.167 482.594 208.5 477.928 215C473.428 221.333 466.844 226.333 458.178 230C449.678 233.667 439.761 235.5 428.428 235.5C416.261 235.5 405.428 233.417 395.928 229.25C386.428 225.083 378.928 219.417 373.428 212.25C367.928 204.917 364.844 196.75 364.178 187.75H406.428C406.928 192.583 409.178 196.5 413.178 199.5C417.178 202.5 422.094 204 427.928 204C433.261 204 437.344 203 440.178 201C443.178 198.833 444.678 196.083 444.678 192.75C444.678 188.75 442.594 185.833 438.428 184C434.261 182 427.511 179.833 418.178 177.5C408.178 175.167 399.844 172.75 393.178 170.25C386.511 167.583 380.761 163.5 375.928 158C371.094 152.333 368.678 144.75 368.678 135.25C368.678 127.25 370.844 120 375.178 113.5C379.678 106.833 386.178 101.583 394.678 97.75C403.344 93.9167 413.594 92 425.428 92ZM707.623 163C707.623 173.5 710.206 181.583 715.373 187.25C720.54 192.917 728.123 195.75 738.123 195.75C748.123 195.75 755.79 192.917 761.123 187.25C766.456 181.583 769.123 173.5 769.123 163V58H811.873V162.75C811.873 178.417 808.54 191.667 801.873 202.5C795.206 213.333 786.206 221.5 774.873 227C763.706 232.5 751.206 235.25 737.373 235.25C723.54 235.25 711.123 232.583 700.123 227.25C689.29 221.75 680.706 213.583 674.373 202.75C668.04 191.75 664.873 178.417 664.873 162.75V58H707.623V163ZM163 79.293V234H72V79.293L105 46.293V202H130V46.293L163 79.293ZM553.832 150.75L596.082 94H648.832L590.832 164L649.332 233.5H596.332L553.832 175V233.5H511.082V48.5H553.832V150.75ZM267.5 129.25C259 129.25 251.75 132.333 245.75 138.5C239.917 144.5 237 152.833 237 163.5C237 174.167 239.917 182.667 245.75 189C251.75 195.167 259 198.25 267.5 198.25C276 198.25 283.167 195.167 289 189C295 182.833 298 174.417 298 163.75C298 153.083 295 144.667 289 138.5C283.167 132.333 276 129.25 267.5 129.25ZM914.893 129.25C906.393 129.25 899.143 132.333 893.143 138.5C887.309 144.667 884.393 153.083 884.393 163.75C884.393 174.417 887.309 182.833 893.143 189C899.143 195.167 906.393 198.25 914.893 198.25C923.393 198.25 930.643 195.167 936.643 189C942.643 182.667 945.643 174.167 945.643 163.5C945.643 152.833 942.643 144.5 936.643 138.5C930.809 132.333 923.559 129.25 914.893 129.25ZM55.707 62H0V0H117.707L55.707 62ZM236 62H180.293L118.293 0H236V62Z" />
        </svg>
      )
    : (
        <svg
          width={dimensions.width}
          height={dimensions.height}
          viewBox="0 0 301 299"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
          aria-label={ariaLabel}
        >
          <path d="M92.4149 101.351L133.266 60.5V258.372H166.457V60.5L207.309 101.351V297.947H92.4149V101.351Z" stroke="currentColor" />
          <path d="M300.5 0.5V78.3723H230.287L152.415 0.5H300.5Z" stroke="currentColor" />
          <path d="M0.5 0.5V78.3723H70.7128L148.585 0.5H0.5Z" stroke="currentColor" />
        </svg>
      );

  if (url) {
    return (
      <Link
        href={url}
        className={cn('inline-flex items-center', className)}
        aria-label={ariaLabel}
        {...props}
      >
        {inner}
      </Link>
    );
  }

  return (
    <div
      className={cn('inline-flex items-center text-foreground', className)}
      aria-label={ariaLabel}
      {...props}
    >
      {inner}
    </div>
  );
};
